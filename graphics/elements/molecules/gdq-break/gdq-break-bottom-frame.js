import * as tslib_1 from "tslib";
import { TweenLite, Power1, TimelineMax } from 'gsap';
const { customElement } = Polymer.decorators;
const FADE_DURATION = 0.334;
const FADE_OUT_EASE = Power1.easeIn;
const FADE_IN_EASE = Power1.easeOut;
const currentHost = nodecg.Replicant('currentHost');
const nowPlaying = nodecg.Replicant('nowPlaying');
const LOGO_FADE_INTERVAL = 20;
const LOGO_FADE_DURATION = 1;
const LOGO_FADE_OUT_EASE = Power1.easeIn;
const LOGO_FADE_IN_EASE = Power1.easeOut;
/**
 * @customElement
 * @polymer
 */
let GDQBreakBottomFrameElement = class GDQBreakBottomFrameElement extends Polymer.Element {
    ready() {
        super.ready();
        currentHost.on('change', newVal => {
            this._changeText(this.$['host-text'], newVal);
        });
        nowPlaying.on('change', newVal => {
            this._changeText(this.$['music-text'], `${newVal.game || '?'} - ${newVal.title || '?'}`);
        });
        // Logo anim
        const logoTL = new TimelineMax({ repeat: -1 });
        logoTL.to(this.$.gdqLogo, LOGO_FADE_DURATION, {
            opacity: 1,
            ease: LOGO_FADE_IN_EASE
        });
        logoTL.to(this.$.gdqLogo, LOGO_FADE_DURATION, {
            opacity: 0,
            ease: LOGO_FADE_OUT_EASE
        }, `+=${LOGO_FADE_INTERVAL}`);
        logoTL.to(this.$.charityLogo, LOGO_FADE_DURATION, {
            opacity: 1,
            ease: LOGO_FADE_IN_EASE
        });
        logoTL.to(this.$.charityLogo, LOGO_FADE_DURATION, {
            opacity: 0,
            ease: LOGO_FADE_OUT_EASE
        }, `+=${LOGO_FADE_INTERVAL}`);
    }
    _changeText(element, newText) {
        TweenLite.to(element, FADE_DURATION, {
            opacity: 0,
            ease: FADE_OUT_EASE,
            callbackScope: this,
            onComplete() {
                element.text = newText;
                TweenLite.to(element, FADE_DURATION, {
                    opacity: 1,
                    ease: FADE_IN_EASE,
                    delay: 0.05
                });
            }
        });
    }
};
GDQBreakBottomFrameElement = tslib_1.__decorate([
    customElement('gdq-break-bottom-frame')
], GDQBreakBottomFrameElement);
export default GDQBreakBottomFrameElement;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2RxLWJyZWFrLWJvdHRvbS1mcmFtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdkcS1icmVhay1ib3R0b20tZnJhbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUlwRCxNQUFNLEVBQUMsYUFBYSxFQUFDLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUUzQyxNQUFNLGFBQWEsR0FBRyxLQUFLLENBQUM7QUFDNUIsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNwQyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBRXBDLE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQWMsYUFBYSxDQUFDLENBQUM7QUFDakUsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBYSxZQUFZLENBQUMsQ0FBQztBQUU5RCxNQUFNLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztBQUM5QixNQUFNLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUM3QixNQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDekMsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBRXpDOzs7R0FHRztBQUVILElBQXFCLDBCQUEwQixHQUEvQyxNQUFxQiwwQkFBMkIsU0FBUSxPQUFPLENBQUMsT0FBTztJQUN0RSxLQUFLO1FBQ0osS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRWQsV0FBVyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7WUFDakMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBZ0IsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM5RCxDQUFDLENBQUMsQ0FBQztRQUVILFVBQVUsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ2hDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQWdCLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsS0FBSyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDekcsQ0FBQyxDQUFDLENBQUM7UUFFSCxZQUFZO1FBQ1osTUFBTSxNQUFNLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO1FBRTdDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUU7WUFDN0MsT0FBTyxFQUFFLENBQUM7WUFDVixJQUFJLEVBQUUsaUJBQWlCO1NBQ3ZCLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUU7WUFDN0MsT0FBTyxFQUFFLENBQUM7WUFDVixJQUFJLEVBQUUsa0JBQWtCO1NBQ3hCLEVBQUUsS0FBSyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7UUFFOUIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxrQkFBa0IsRUFBRTtZQUNqRCxPQUFPLEVBQUUsQ0FBQztZQUNWLElBQUksRUFBRSxpQkFBaUI7U0FDdkIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxrQkFBa0IsRUFBRTtZQUNqRCxPQUFPLEVBQUUsQ0FBQztZQUNWLElBQUksRUFBRSxrQkFBa0I7U0FDeEIsRUFBRSxLQUFLLGtCQUFrQixFQUFFLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsV0FBVyxDQUFDLE9BQW9CLEVBQUUsT0FBZTtRQUNoRCxTQUFTLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUU7WUFDcEMsT0FBTyxFQUFFLENBQUM7WUFDVixJQUFJLEVBQUUsYUFBYTtZQUNuQixhQUFhLEVBQUUsSUFBSTtZQUNuQixVQUFVO2dCQUNSLE9BQWUsQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDO2dCQUNoQyxTQUFTLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUU7b0JBQ3BDLE9BQU8sRUFBRSxDQUFDO29CQUNWLElBQUksRUFBRSxZQUFZO29CQUNsQixLQUFLLEVBQUUsSUFBSTtpQkFDWCxDQUFDLENBQUM7WUFDSixDQUFDO1NBQ0QsQ0FBQyxDQUFDO0lBQ0osQ0FBQztDQUNELENBQUE7QUFuRG9CLDBCQUEwQjtJQUQ5QyxhQUFhLENBQUMsd0JBQXdCLENBQUM7R0FDbkIsMEJBQTBCLENBbUQ5QztlQW5Eb0IsMEJBQTBCIn0=